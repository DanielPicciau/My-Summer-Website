<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daniel's Summer Schedule with Pushover</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    :root {
      --primary: #38bdf8;
      --primary-dark: #0ea5e9;
      --accent: #818cf8;
      --bg-dark: #020617;
      --card-dark: #0f172a;
      --card-border: #1e293b;
      --text-primary: #e2e8f0;
      --text-secondary: #94a3b8;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, var(--bg-dark) 0%, #0c1226 100%);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(56, 189, 248, 0); }
      100% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0); }
    }
    
    .current-task-highlight {
      position: relative;
      background: linear-gradient(90deg, rgba(56, 189, 248, 0.15) 0%, rgba(56, 189, 248, 0) 100%) !important;
      border-left: 4px solid var(--primary) !important;
      animation: pulse 2s infinite;
      padding-left: 1.25rem;
    }
    
    .current-task-highlight::before {
      content: "NOW";
      position: absolute;
      top: 50%;
      right: 1rem;
      transform: translateY(-50%);
      background: var(--primary);
      color: var(--bg-dark);
      font-size: 0.7rem;
      font-weight: 800;
      padding: 0.15rem 0.5rem;
      border-radius: 9999px;
    }
    
    .day-card {
      transition: all 0.3s ease;
      border: 1px solid var(--card-border);
      box-shadow: 0 10px 30px -10px rgba(2, 6, 23, 0.5);
      position: relative;
      overflow: hidden;
    }
    
    .day-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
    }
    
    .day-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px -10px rgba(2, 6, 23, 0.6);
    }
    
    .status-bar {
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(56, 189, 248, 0.2);
      box-shadow: 0 5px 15px rgba(2, 6, 23, 0.3);
    }
    
    .glow-text {
      text-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
    }
        
    .progress-bar {
      height: 4px;
      background: rgba(56, 189, 248, 0.2);
      border-radius: 2px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      width: 0%;
      transition: width 0.5s ease;
    }
    
    .floating-clock {
      position: fixed;
      top: 1rem;
      right: 1rem;
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(56, 189, 248, 0.2);
      border-radius: 1rem;
      padding: 0.75rem 1.25rem;
      font-size: 1.5rem;
      font-weight: 700;
      box-shadow: 0 5px 15px rgba(2, 6, 23, 0.3);
      z-index: 100;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .floating-clock i {
      color: var(--primary);
      font-size: 1.25rem;
    }
    
    .clock-time {
      font-variant-numeric: tabular-nums;
    }

    .task-completed {
      text-decoration: line-through;
      color: var(--text-secondary);
      opacity: 0.7;
    }

    .task-checkbox {
        margin-right: 0.75rem;
        appearance: none;
        width: 1.25rem;
        height: 1.25rem;
        border: 2px solid var(--primary);
        border-radius: 0.375rem;
        background-color: transparent;
        transition: all 0.2s ease;
        position: relative;
        cursor: pointer;
    }

    .task-checkbox:checked {
        background-color: var(--primary);
        border-color: var(--primary);
    }

    .task-checkbox:checked::before {
        content: '\2713';
        display: block;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 0.875rem;
        color: var(--bg-dark);
        font-weight: bold;
    }

    .task-checkbox:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.5);
    }

    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--card-dark);
      color: var(--text-primary);
      padding: 15px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      border-left: 4px solid var(--primary);
      transform: translateX(120%);
      transition: transform 0.3s ease;
      z-index: 1000;
      max-width: 300px;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification-title {
      font-weight: bold;
      margin-bottom: 5px;
      color: var(--primary);
    }
    
    .notification-close {
      position: absolute;
      top: 5px;
      right: 5px;
      background: none;
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      font-size: 1.2rem;
    }
    
    .pushover-section {
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(56, 189, 248, 0.2);
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .pushover-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    label {
      font-weight: 600;
      color: var(--primary);
    }
    
    input {
      padding: 0.75rem;
      border-radius: 0.5rem;
      border: 1px solid var(--card-border);
      background: rgba(2, 6, 23, 0.5);
      color: var(--text-primary);
      font-family: 'Inter', sans-serif;
    }
    
    .btn {
      background: linear-gradient(90deg, var(--primary), var(--accent));
      color: var(--bg-dark);
      font-weight: 700;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(56, 189, 248, 0.3);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    .btn i {
      font-size: 1rem;
    }
    
    .btn-success {
      background: linear-gradient(90deg, #10b981, #059669);
    }

    @media (max-width: 1024px) {
      .floating-clock {
        top: auto;
        bottom: 1rem;
        right: 1rem;
      }
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Floating Clock -->
  <div class="floating-clock">
    <i class="fas fa-clock"></i>
    <span id="live-clock" class="clock-time">00:00:00</span>
  </div>
  
  <!-- Notification Container -->
  <div id="notification" class="notification">
    <button class="notification-close">&times;</button>
    <div class="notification-title" id="notification-title">Notification</div>
    <div id="notification-message">Message content goes here</div>
  </div>
  
  <!-- Main content area -->
  <main class="max-w-7xl mx-auto px-4 py-8 w-full flex-grow">
    <header class="text-center mb-10">
      <h1 class="text-4xl md:text-5xl font-extrabold mb-4 glow-text">
        <span class="bg-gradient-to-r from-sky-400 to-purple-500 bg-clip-text text-transparent">
          Daniel's Summer Schedule
        </span>
      </h1>
      <p class="text-slate-400 text-lg">
        <i class="fas fa-calendar mr-2"></i>June 10 – Sept 10, 2025
      </p>
    </header>

  

    <!-- Today's Focus Section -->
    <section class="bg-card-dark rounded-xl p-6 mb-8 border border-card-border shadow-lg flex flex-col lg:flex-row items-start lg:items-center justify-between">
      <div class="mb-4 lg:mb-0 lg:w-1/3">
        <h2 class="text-3xl font-bold text-sky-400 mb-2 flex items-center gap-3">
          <i class="fas fa-calendar-day text-purple-400"></i>
          <span id="today-focus-day">Loading Day...</span>
        </h2>
        <p class="text-slate-400 text-sm">
          <span id="today-focus-date">Loading Date...</span>
          <span class="font-mono ml-2 text-sky-300" id="today-focus-time">00:00:00</span>
        </p>
      </div>

      <div class="lg:w-1/3 mb-4 lg:mb-0">
        <h3 class="text-xl font-semibold text-slate-200 mb-2 flex items-center gap-2">
          <i class="fas fa-hourglass-half text-orange-400"></i>
          Current Task:
        </h3>
        <p id="today-focus-current-task" class="text-lg text-slate-100 font-medium ml-6">
          Loading current task...
        </p>
        <div class="progress-bar mt-2">
          <div id="today-focus-progress-fill" class="progress-fill"></div>
        </div>
      </div>

      <div class="lg:w-1/3">
        <h3 class="text-xl font-semibold text-slate-200 mb-2 flex items-center gap-2">
          <i class="fas fa-tasks text-green-400"></i>
          Upcoming Tasks:
        </h3>
        <ul id="today-focus-upcoming-tasks" class="space-y-1 ml-6 text-slate-300 text-base">
          <li>No upcoming tasks.</li>
        </ul>
      </div>
    </section>

    <!-- Missed Hours Summary -->
    <section class="bg-card-dark rounded-xl p-6 mb-8 border border-card-border shadow-lg text-center">
      <h2 class="text-2xl font-bold text-red-400 mb-3 flex items-center justify-center gap-3">
        <i class="fas fa-stopwatch text-red-500"></i>
        Missed Study Time Analysis
      </h2>
      <p id="missed-hours-summary" class="text-xl text-slate-100 mb-2">
        You haven't missed any study time today! Keep up the great work.
      </p>
      <p id="missed-hours-impact" class="text-slate-400 text-sm">
        <!-- Impact message will be populated here by JS -->
      </p>
    </section>

    <!-- Responsive grid for daily schedule cards -->
    <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
      <!-- Monday -->
      <div class="day-card bg-card-dark rounded-xl p-6 relative">
        <div class="flex items-center mb-4">
          <i class="fas fa-sun text-yellow-400 mr-3 text-xl"></i>
          <h2 class="text-2xl font-bold text-sky-400">Monday</h2>
        </div>
        <ul class="space-y-4" id="monday-tasks">
          <!-- Tasks will be populated by JS to include checkboxes -->
        </ul>
      </div>

      <!-- Tuesday -->
      <div class="day-card bg-card-dark rounded-xl p-6 relative">
        <div class="flex items-center mb-4">
          <i class="fas fa-code text-purple-400 mr-3 text-xl"></i>
          <h2 class="text-2xl font-bold text-sky-400">Tuesday</h2>
        </div>
        <ul class="space-y-4" id="tuesday-tasks"></ul>
      </div>

      <!-- Wednesday -->
      <div class="day-card bg-card-dark rounded-xl p-6 relative">
        <div class="flex items-center mb-4">
          <i class="fas fa-chart-line text-green-400 mr-3 text-xl"></i>
          <h2 class="text-2xl font-bold text-sky-400">Wednesday</h2>
        </div>
        <ul class="space-y-4" id="wednesday-tasks"></ul>
      </div>

      <!-- Thursday -->
      <div class="day-card bg-card-dark rounded-xl p-6 relative">
        <div class="flex items-center mb-4">
          <i class="fas fa-brain text-indigo-400 mr-3 text-xl"></i>
          <h2 class="text-2xl font-bold text-sky-400">Thursday</h2>
        </div>
        <ul class="space-y-4" id="thursday-tasks"></ul>
      </div>

      <!-- Friday -->
      <div class="day-card bg-card-dark rounded-xl p-6 relative">
        <div class="flex items-center mb-4">
          <i class="fas fa-rocket text-orange-400 mr-3 text-xl"></i>
          <h2 class="text-2xl font-bold text-sky-400">Friday</h2>
        </div>
        <ul class="space-y-4" id="friday-tasks"></ul>
      </div>

      <!-- Saturday -->
      <div class="day-card bg-card-dark rounded-xl p-6 relative">
        <div class="flex items-center mb-4">
          <i class="fas fa-coffee text-amber-400 mr-3 text-xl"></i>
          <h2 class="text-2xl font-bold text-sky-400">Saturday</h2>
        </div>
        <ul class="space-y-4" id="saturday-tasks"></ul>
      </div>

      <!-- Sunday -->
      <div class="day-card bg-card-dark rounded-xl p-6 relative">
        <div class="flex items-center mb-4">
          <i class="fas fa-restroom text-cyan-400 mr-3 text-xl"></i>
          <h2 class="text-2xl font-bold text-sky-400">Sunday</h2>
        </div>
        <ul class="space-y-4" id="sunday-tasks"></ul>
      </div>
    </section>

    <br>
     <!-- Pushover Configuration -->
     <section class="pushover-section">
      <h2 class="text-2xl font-bold text-sky-400 mb-4 flex items-center gap-3">
        <i class="fas fa-bell text-yellow-400"></i>
        Pushover Notifications
      </h2>
      <div class="pushover-form">
        <div class="form-group">
          <label for="pushover-user">User Key:</label>
          <input type="text" id="pushover-user" placeholder="Enter your Pushover User Key" value="u5cz4j61ut3qz3ehbh4gzo9dnwg423">
        </div>
        <div class="form-group">
          <label for="pushover-token">API Token:</label>
          <input type="text" id="pushover-token" placeholder="Enter your Pushover API Token" value="acdwyq6voywdmw2dt1dnu4jgjui7jr">
        </div>
        <button id="save-pushover" class="btn">
          <i class="fas fa-save"></i> Save Configuration
        </button>
        <button id="test-notification" class="btn btn-success">
          <i class="fas fa-paper-plane"></i> Send Test Notification
        </button>
      </div>
    </section>

  </main>

  <!-- Page Footer -->
  <footer class="w-full text-center py-6 border-t border-slate-800 bg-slate-950">
    <p class="text-slate-500 text-sm">
      <i class="fas fa-code mr-1"></i>Created for Daniel's Summer Plan • 
      <i class="fas fa-tv ml-2 mr-1"></i>Optimized for Smart TV • 
      <i class="fas fa-sync-alt ml-2 mr-1"></i>Updated: June 2025
    </p>
  </footer>

  <script>
    // Pushover Configuration
    const PUSHOVER_API_URL = 'https://api.pushover.net/1/messages.json';
    let pushoverUserKey = 'u5cz4j61ut3qz3ehbh4gzo9dnwg423';
    let pushoverApiToken = 'acdwyq6voywdmw2dt1dnu4jgjui7jr';
    let lastNotifiedTaskId = null;
    
    // Notification System
    const notification = {
      element: document.getElementById('notification'),
      title: document.getElementById('notification-title'),
      message: document.getElementById('notification-message'),
      closeBtn: document.querySelector('.notification-close'),
      
      init: function() {
        this.closeBtn.addEventListener('click', () => this.hide());
      },
      
      show: function(title, message, duration = 5000) {
        this.title.textContent = title;
        this.message.textContent = message;
        this.element.classList.add('show');
        
        if (duration > 0) {
          setTimeout(() => this.hide(), duration);
        }
      },
      
      hide: function() {
        this.element.classList.remove('show');
      }
    };
    
    // Pushover Notification Function
    async function sendPushoverNotification(title, message) {
      try {
        const formData = new FormData();
        formData.append('token', pushoverApiToken);
        formData.append('user', pushoverUserKey);
        formData.append('title', title);
        formData.append('message', message);
        formData.append('sound', 'cosmic');
        
        const response = await fetch(PUSHOVER_API_URL, {
          method: 'POST',
          body: formData
        });
        
        const result = await response.json();
        
        if (result.status === 1) {
          notification.show('Notification Sent', 'Mobile notification has been delivered!');
          return true;
        } else {
          notification.show('Error', `Failed to send notification: ${result.errors?.join(', ') || 'Unknown error'}`);
          return false;
        }
      } catch (error) {
        notification.show('Error', `Failed to send notification: ${error.message}`);
        return false;
      }
    }

    

    // Schedule Data
    const scheduleData = {
      Monday: [
        { day: "Monday", start: "09:00", end: "10:30", task: "Morning routine", duration: 90, id: "task-mon-0" },
        { day: "Monday", start: "10:30", end: "12:30", task: "HTML/CSS Study", duration: 120, id: "task-mon-1" },
        { day: "Monday", start: "12:30", end: "13:30", task: "Lunch + Leisure", duration: 60, id: "task-mon-2" },
        { day: "Monday", start: "13:30", end: "15:30", task: "Project: Webpage/Interface", duration: 120, id: "task-mon-3" },
        { day: "Monday", start: "15:30", end: "16:00", task: "Short break", duration: 30, id: "task-mon-4" },
        { day: "Monday", start: "16:00", end: "18:00", task: "Practice: CSS/JS", duration: 120, id: "task-mon-5" },
        { day: "Monday", start: "18:00", end: "19:00", task: "Dinner", duration: 60, id: "task-mon-6" },
        { day: "Monday", start: "19:00", end: "21:00", task: "Coursera (Frontend Module)", duration: 120, id: "task-mon-7" },
        { day: "Monday", start: "21:00", end: "23:59", task: "Free time", duration: 179, id: "task-mon-8" },
      ],
      Tuesday: [
        { day: "Tuesday", start: "09:00", end: "10:30", task: "Morning routine", duration: 90, id: "task-tue-0" },
        { day: "Tuesday", start: "10:30", end: "12:30", task: "Django Basics", duration: 120, id: "task-tue-1" },
        { day: "Tuesday", start: "12:30", end: "13:30", task: "Lunch + Leisure", duration: 60, id: "task-tue-2" },
        { day: "Tuesday", start: "13:30", end: "15:30", task: "Coding: Django Project", duration: 120, id: "task-tue-3" },
        { day: "Tuesday", start: "15:30", end: "16:00", task: "Short break", duration: 30, id: "task-tue-4" },
        { day: "Tuesday", start: "16:00", end: "18:00", task: "Continue: Add Functionality", duration: 120, id: "task-tue-5" },
        { day: "Tuesday", start: "18:00", end: "19:00", task: "Dinner", duration: 60, id: "task-tue-6" },
        { day: "Tuesday", start: "19:00", end: "21:00", task: "Assignments/Tutorials", duration: 120, id: "task-tue-7" },
        { day: "Tuesday", start: "21:00", end: "23:59", task: "Free time", duration: 179, id: "task-tue-8" },
      ],
      Wednesday: [
        { day: "Wednesday", start: "09:00", end: "10:30", task: "Morning routine", duration: 90, id: "task-wed-0" },
        { day: "Wednesday", start: "10:30", end: "12:30", task: "Pandas Fundamentals", duration: 120, id: "task-wed-1" },
        { day: "Wednesday", start: "12:30", end: "13:30", task: "Lunch + Leisure", duration: 60, id: "task-wed-2" },
        { day: "Wednesday", start: "13:30", end: "15:30", task: "Data Practice", duration: 120, id: "task-wed-3" },
        { day: "Wednesday", start: "15:30", end: "16:00", task: "Short break", duration: 30, id: "task-wed-4" },
        { day: "Wednesday", start: "16:00", end: "18:00", task: "Data Transformations", duration: 120, id: "task-wed-5" },
        { day: "Wednesday", start: "18:00", end: "19:00", task: "Dinner", duration: 60, id: "task-wed-6" },
        { day: "Wednesday", start: "19:00", end: "21:00", task: "Coursera Challenges", duration: 120, id: "task-wed-7" },
        { day: "Wednesday", start: "21:00", end: "23:59", task: "Free time", duration: 179, id: "task-wed-8" },
      ],
      Thursday: [
        { day: "Thursday", start: "09:00", end: "10:30", task: "Morning routine", duration: 90, id: "task-thu-0" },
        { day: "Thursday", start: "10:30", end: "12:30", task: "Advanced Concepts", duration: 120, id: "task-thu-1" },
        { day: "Thursday", start: "12:30", end: "13:30", task: "Lunch + Leisure", duration: 60, id: "task-thu-2" },
        { day: "Thursday", start: "13:30", end: "15:30", task: "Apply Concepts in Code", duration: 120, id: "task-thu-3" },
        { day: "Thursday", start: "15:30", end: "16:00", task: "Short break", duration: 30, id: "task-thu-4" },
        { day: "Thursday", start: "16:00", end: "18:00", task: "Course Project Work", duration: 120, id: "task-thu-5" },
        { day: "Thursday", start: "18:00", end: "19:00", task: "Dinner", duration: 60, id: "task-thu-6" },
        { day: "Thursday", start: "19:00", end: "21:00", task: "Reinforce Learning", duration: 120, id: "task-thu-7" },
        { day: "Thursday", start: "21:00", end: "23:59", task: "Free time", duration: 179, id: "task-thu-8" },
      ],
      Friday: [
        { day: "Friday", start: "09:00", end: "10:30", task: "Morning routine", duration: 90, id: "task-fri-0" },
        { day: "Friday", start: "10:30", end: "12:30", task: "Project Planning", duration: 120, id: "task-fri-1" },
        { day: "Friday", start: "12:30", end: "13:30", task: "Lunch + Leisure", duration: 60, id: "task-fri-2" },
        { day: "Friday", start: "13:30", end: "15:30", task: "Project: Start Building", duration: 120, id: "task-fri-3" },
        { day: "Friday", start: "15:30", end: "16:00", task: "Short break", duration: 30, id: "task-fri-4" },
        { day: "Friday", start: "16:00", end: "18:00", task: "Features & Fixes", duration: 120, id: "task-fri-5" },
        { day: "Friday", start: "18:00", end: "19:00", task: "Dinner", duration: 60, id: "task-fri-6" },
        { day: "Friday", start: "19:00", end: "21:00", task: "Finalize/Review", duration: 120, id: "task-fri-7" },
        { day: "Friday", start: "21:00", end: "23:59", task: "Free time", duration: 179, id: "task-fri-8" },
      ],
      Saturday: [
        { day: "Saturday", start: "09:00", end: "10:00", task: "Morning routine & Week Review", duration: 60, id: "task-sat-0" },
        { day: "Saturday", start: "10:00", end: "13:00", task: "Extended Project Work", duration: 180, id: "task-sat-1" },
        { day: "Saturday", start: "13:00", end: "14:00", task: "Lunch Break", duration: 60, id: "task-sat-2" },
        { day: "Saturday", start: "14:00", end: "17:00", task: "Skill Deep Dive / New Tech Exploration", duration: 180, id: "task-sat-3" },
        { day: "Saturday", start: "17:00", end: "18:00", task: "Physical Activity / Outdoors", duration: 60, id: "task-sat-4" },
        { day: "Saturday", start: "18:00", end: "23:59", task: "Free time / Social", duration: 359, id: "task-sat-5" },
      ],
      Sunday: [
        { day: "Sunday", start: "00:00", end: "12:59", task: "Rest & Recharge", duration: 779, id: "task-sun-0" },
        { day: "Sunday", start: "13:00", end: "17:00", task: "Plan for Next Week", duration: 240, id: "task-sun-1" },
        { day: "Sunday", start: "17:01", end: "20:59", task: "Relaxing Activities / Hobbies", duration: 238, id: "task-sun-2" },
        { day: "Sunday", start: "21:00", end: "22:00", task: "Prepare for Monday", duration: 60, id: "task-sun-3" },
        { day: "Sunday", start: "22:01", end: "23:59", task: "Rest & Recharge", duration: 118, id: "task-sun-4" }
      ],
    };

    // Initialize notification system
    notification.init();

    // DOM Elements
    const liveClockEl = document.getElementById('live-clock');
    const todayFocusDayEl = document.getElementById('today-focus-day');
    const todayFocusDateEl = document.getElementById('today-focus-date');
    const todayFocusTimeEl = document.getElementById('today-focus-time');
    const todayFocusCurrentTaskEl = document.getElementById('today-focus-current-task');
    const todayFocusProgressFill = document.getElementById('today-focus-progress-fill');
    const todayFocusUpcomingTasksEl = document.getElementById('today-focus-upcoming-tasks');
    const missedHoursSummaryEl = document.getElementById('missed-hours-summary');
    const missedHoursImpactEl = document.getElementById('missed-hours-impact');
    const savePushoverBtn = document.getElementById('save-pushover');
    const testNotificationBtn = document.getElementById('test-notification');
    
    let currentlyHighlighted = null;

    // Save Pushover configuration
    savePushoverBtn.addEventListener('click', () => {
      pushoverUserKey = document.getElementById('pushover-user').value;
      pushoverApiToken = document.getElementById('pushover-token').value;
      
      localStorage.setItem('pushoverUserKey', pushoverUserKey);
      localStorage.setItem('pushoverApiToken', pushoverApiToken);
      
      notification.show('Configuration Saved', 'Pushover settings have been updated successfully!');
    });

    // Test notification
    testNotificationBtn.addEventListener('click', async () => {
      notification.show('Sending Test', 'Sending test notification to your mobile...');
      const success = await sendPushoverNotification(
        'Schedule Notification Test',
        'This is a test notification from your summer schedule app!'
      );
    });

    function timeToMinutes(timeStr) {
      const [hours, minutes] = timeStr.split(':').map(Number);
      return hours * 60 + minutes;
    }

    function updateLiveClock() {
      const now = new Date();
      const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });
      liveClockEl.textContent = timeString;
      todayFocusTimeEl.textContent = timeString;
    }

    function saveTaskCompletion(taskId, isCompleted) {
      const completionStatus = JSON.parse(localStorage.getItem('taskCompletion') || '{}');
      completionStatus[taskId] = isCompleted;
      localStorage.setItem('taskCompletion', JSON.stringify(completionStatus));
      updateMissedHoursSummary();
    }

    function loadTaskCompletion(taskId) {
      const completionStatus = JSON.parse(localStorage.getItem('taskCompletion') || '{}');
      return completionStatus[taskId] || false;
    }

    function renderTasksForDay(dayName, tasks) {
      const ulElement = document.getElementById(`${dayName.toLowerCase()}-tasks`);
      if (!ulElement) return;

      ulElement.innerHTML = '';

      tasks.forEach(task => {
        const isCompleted = loadTaskCompletion(task.id);

        const li = document.createElement('li');
        li.id = task.id;
        li.className = `p-2 rounded-lg flex items-start gap-2 ${isCompleted ? 'task-completed' : ''}`;

        li.innerHTML = `
          <input type="checkbox" class="task-checkbox mt-1" id="checkbox-${task.id}" ${isCompleted ? 'checked' : ''}>
          <div class="flex-1">
            <div class="flex justify-between items-center">
              <strong class="text-slate-100">${task.start}–${task.end}</strong>
              <span class="text-xs text-slate-500">${task.duration} min</span>
            </div>
            <div class="text-slate-300">${task.task}</div>
          </div>
        `;
        
        ulElement.appendChild(li);

        const checkbox = document.getElementById(`checkbox-${task.id}`);
        if (checkbox) {
            checkbox.addEventListener('change', (event) => {
                saveTaskCompletion(task.id, event.target.checked);
                if (event.target.checked) {
                    li.classList.add('task-completed');
                } else {
                    li.classList.remove('task-completed');
                }
            });
        }
      });
    }

    function calculateMissedHours() {
      let missedMinutes = 0;
      const now = new Date();
      const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
      const currentDayIndex = now.getDay();
      const currentMinutesOfDay = now.getHours() * 60 + now.getMinutes();

      for (let i = 0; i < dayNames.length; i++) {
        const dayName = dayNames[i];
        const dayTasks = scheduleData[dayName];
        if (!dayTasks) continue;

        if (i < currentDayIndex) {
          dayTasks.forEach(task => {
            if (task.task.toLowerCase().includes("free time") || 
                task.task.toLowerCase().includes("leisure") || 
                task.duration === undefined) {
              return; 
            }
            const isCompleted = loadTaskCompletion(task.id);
            if (!isCompleted) {
              missedMinutes += task.duration;
            }
          });
        } else if (i === currentDayIndex) {
          dayTasks.forEach(task => {
            const taskEndMinutes = timeToMinutes(task.end);
            if (taskEndMinutes <= currentMinutesOfDay) {
              if (task.task.toLowerCase().includes("free time") || 
                  task.task.toLowerCase().includes("leisure") || 
                  task.duration === undefined) {
                return; 
              }
              const isCompleted = loadTaskCompletion(task.id);
              if (!isCompleted) {
                missedMinutes += task.duration;
              }
            }
          });
        }
      }
      return missedMinutes;
    }

    function updateMissedHoursSummary() {
      const totalMissedMinutes = calculateMissedHours();
      const missedHours = Math.floor(totalMissedMinutes / 60);
      const remainingMinutes = totalMissedMinutes % 60;

      if (totalMissedMinutes === 0) {
        missedHoursSummaryEl.textContent = "You haven't missed any study time! Keep up the great work.";
        missedHoursImpactEl.textContent = "";
      } else {
        let timeString = '';
        if (missedHours > 0) {
            timeString += `${missedHours} hour${missedHours > 1 ? 's' : ''}`;
        }
        if (remainingMinutes > 0) {
            if (timeString) timeString += ' and ';
            timeString += `${remainingMinutes} minute${remainingMinutes > 1 ? 's' : ''}`;
        }
        
        missedHoursSummaryEl.textContent = `You have missed approximately ${timeString} of study time.`;
        missedHoursImpactEl.textContent = 
          `This time could have been used to deepen your understanding in areas like ${missedHours >= 2 ? 'advanced algorithms' : 'a new framework'}, 
          complete a mini-project, or revise challenging concepts. Consistent effort builds strong foundations!`;
      }
    }

    async function updateCurrentTaskAndFocus() {
      const now = new Date();
      const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
      const currentDayName = dayNames[now.getDay()];
      const currentMinutes = now.getHours() * 60 + now.getMinutes();
      const dateString = now.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });

      let activeTask = null;
      let activeTaskName = "Free Time / Unscheduled";
      let taskProgress = 0;
      let taskStart = 0;
      let taskEnd = 0;
      let upcomingTasks = [];

      todayFocusDayEl.textContent = currentDayName;
      todayFocusDateEl.textContent = dateString;
      
      const tasksToday = scheduleData[currentDayName];
      if (tasksToday) {
        for (let i = 0; i < tasksToday.length; i++) {
          const task = tasksToday[i];
          const taskStartMinutes = timeToMinutes(task.start);
          const taskEndMinutes = timeToMinutes(task.end);
          
          if (currentMinutes >= taskStartMinutes && currentMinutes < taskEndMinutes) {
            activeTask = task;
            activeTaskName = task.task;
            taskStart = taskStartMinutes;
            taskEnd = taskEndMinutes;
            taskProgress = Math.min(100, Math.max(0, ((currentMinutes - taskStart) / (taskEnd - taskStart)) * 100));
            
            // Send notification for new task
            if (lastNotifiedTaskId !== task.id) {
              lastNotifiedTaskId = task.id;
              
              // Send Pushover notification
              await sendPushoverNotification(
                `Time for: ${task.task}`,
                `From ${task.start} to ${task.end}`
              );
            }
            
            for (let j = i + 1; j < tasksToday.length && upcomingTasks.length < 3; j++) {
                if (!tasksToday[j].task.toLowerCase().includes("free time") && !tasksToday[j].task.toLowerCase().includes("leisure")) {
                    upcomingTasks.push(tasksToday[j]);
                }
            }
            break;
          } else if (currentMinutes < taskStartMinutes) {
            if (activeTask === null) {
                for (let j = i; j < tasksToday.length && upcomingTasks.length < 3; j++) {
                    if (!tasksToday[j].task.toLowerCase().includes("free time") && !tasksToday[j].task.toLowerCase().includes("leisure")) {
                        upcomingTasks.push(tasksToday[j]);
                    }
                }
            }
            break;
          }
        }
      }

      todayFocusCurrentTaskEl.textContent = activeTaskName;
      todayFocusProgressFill.style.width = `${taskProgress}%`;

      todayFocusUpcomingTasksEl.innerHTML = '';
      if (upcomingTasks.length > 0) {
        upcomingTasks.forEach(task => {
          const li = document.createElement('li');
          li.innerHTML = `<strong>${task.start}</strong>: ${task.task}`;
          todayFocusUpcomingTasksEl.appendChild(li);
        });
      } else {
        const li = document.createElement('li');
        li.textContent = "No more scheduled tasks for today.";
        todayFocusUpcomingTasksEl.appendChild(li);
      }

      if (currentlyHighlighted) {
        const prevTaskElement = document.getElementById(currentlyHighlighted);
        if (prevTaskElement) {
          prevTaskElement.classList.remove('current-task-highlight');
        }
      }

      if (activeTask && activeTask.id) {
        const currentTaskElement = document.getElementById(activeTask.id);
        if (currentTaskElement) {
          currentTaskElement.classList.add('current-task-highlight');
          currentlyHighlighted = activeTask.id;
        } else {
          currentlyHighlighted = null;
        }
      } else {
        currentlyHighlighted = null;
      }
    }

    function initializeSchedule() {
        for (const day in scheduleData) {
            renderTasksForDay(day, scheduleData[day]);
        }
        updateMissedHoursSummary();
    }

    // Event listener for when the DOM is fully loaded
    document.addEventListener('DOMContentLoaded', () => {
      // Load saved Pushover settings
      const savedUserKey = localStorage.getItem('pushoverUserKey');
      const savedApiToken = localStorage.getItem('pushoverApiToken');
      
      if (savedUserKey) {
        document.getElementById('pushover-user').value = savedUserKey;
        pushoverUserKey = savedUserKey;
      }
      
      if (savedApiToken) {
        document.getElementById('pushover-token').value = savedApiToken;
        pushoverApiToken = savedApiToken;
      }
      
      initializeSchedule();
      updateLiveClock();
      updateCurrentTaskAndFocus();

      setInterval(updateCurrentTaskAndFocus, 1000);
      setInterval(updateLiveClock, 1000);
    });
    
    // Animate day cards on page load
    document.querySelectorAll('.day-card').forEach((card, index) => {
      card.style.animation = `fadeIn 0.5s ease ${index * 0.1}s forwards`;
      card.style.opacity = '0';
    });
  </script>
</body>
</html>